<script type="text/javascript"><!--
$(document).ready(function() {
	// toggler for the peildatum
	$(this).on('change', '[data-change-toggle]', function() {
		$('[data-role=' + $(this).data('change-toggle') + ']').toggle($(this).is(':checked') || $(this).is(':selected')); 
	});
	
	// toggler for the types of invoices
	$(this).on('click', '[data-click-toggle]', function() {
		$('[data-role=' + $(this).data('click-toggle') + ']').toggle();
		return false;
	});
	
	// toggler for the switch buttons 
	$(this).on('click', '[data-click-switch]', function(e) {
		$('[data-click-switch]').each(function() {
			var $this = $(this);
			$this.removeClass('active');
			$('[data-role=' + $this.data('click-switch') + ']').hide();
		});
		$('[data-role=' + $(this).data('click-switch') + ']').show();
		$(this).addClass('active');
		return false;
	});
	
	// filler of the types of invoices
	$.each(getInvoices(), function() {
		var type = 'month',
				insert = '<li>' + this.company.name; 
				
		if ( this.frequency === 3 ) type="quarter";
		if ( this.frequency === 6 ) type="halfyear";
		if ( this.frequency === 12 ) type="year";
		
		if ( this.company.name != this.firstLineOfNotes ) {
			insert += " - <i>" + this.firstLineOfNotes + "</i>";
		}
		insert += "</li>";
		$container = $("[data-role=report_" + type + "_invoices]").append(insert);

		$container.prev('label').find('input').val($container.find('li').length);
	});
	
	// filler and toggler for the error invoices
	var errorProjects = getProjectsWithoutGroup(),
			$container = $('#projectsWithoutGroup');
	
	$container.prev('label').toggle(!!errorProjects.length);
	$.each(errorProjects, function() {
		$container.append('<li>' + this.id + ' ' + this.company.name + '</li>');
	});
	
	errorProjects = getProjectsWithErrors(),
	$container = $('#projectsWithErrors');
	
	$container.prev('label').toggle(!!errorProjects.length);
	$.each(errorProjects, function() {
		$container.append('<li>' + this.id + ' ' + this.company.name + '</li>');
	});
	
	// filler and updater for the invoicenumber input
	$('#invoice-number')
			.val(initialInvoiceNumber||0)
			.on('change', function() {
				initialInvoiceNumber = parseInt($(this).val());
				$(document).trigger('invoicenumber_update');
			});
	
	$(document).on('invoicenumber_update', function() {
		$('[data-role=invoicenumber]').each(function(it) {
			$(this).html(initialInvoiceNumber + it);	
		});		
	});
	
});
--></script>
<style>
	fieldset#overview {
		margin: 1px 1em 1px;
		padding: .5em; 
		border: 1px solid blue; 
		font-family: Verdana;
		line-height: 1.4em;
		border-radius: .3em;
		background: rgb(200,200,255);
		background: rgba(200,200,255,.75);
		filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#bfffffff', endColorstr='#bfffffff'); /* IE */
		
		-moz-box-shadow: 3px 3px 4px #000; /* Firefox/Mozilla */  
		-webkit-box-shadow: 3px 3px 4px #000; /*Safari/Chrome */  
		box-shadow: 3px 3px 4px #000; /* Opera & hoe het zou moeten */  
		/* Voor IE 8 */  
		-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')";  
		/* Voor IE 5.5 - 7 */  
		filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000');  
	}
	fieldset#overview legend {
		background: rgb(200,200,255);
		padding: .5em; 
		border: 1px solid blue; 
		font-size: x-large;
		font-weight: bold;
		border-top-left-radius: .3em;
		border-top-right-radius: .3em;
	}
	fieldset#overview label {
		float: left;
		clear: both;
		width: 100%;
	}
	fieldset#overview label input {
		float: right;
		border: 1px solid silver;
		margin-left: 1em;
	}
	fieldset#overview label input.cb {
		float: left;
		margin: .2em .3em 0 0;
	}
	fieldset#overview label input.readonly {
		background: transparent;
		border: 0px;
	}
	fieldset#overview  button {
		cursor: pointer;
		float: right;
		font-size: 1.1em;
		color: #ffffff;
		padding: .3em 1em;
		background: #ffa442;
		background: -moz-linear-gradient(top,	#ffa442 0%,	#665200);
		background: -webkit-gradient(linear, left top, left bottom,	from(#ffa442), to(#665200));
		border-radius: 10px;
		border: 1px solid #660000;
		box-shadow:	0px 1px 3px rgba(000,000,000,0.5), inset 0px 0px 1px rgba(255,255,255,0.5);
		text-shadow: 0px -1px 0px rgba(000,000,000,0.7), 0px 1px 0px rgba(255,255,255,0.3);
		clear: both;
	}
	fieldset#overview  button.active {
		color: #ccc;
	}
	fieldset ul {
		clear: both;
	}
	@media print {
		fieldset#overview {
			display: none;
		} 
	}
	
</style>
<fieldset id="overview" class="noPrint">
	<legend>Overzicht</legend>
	<div>
		<label>
			Peildatum tekst afdrukken
			<input type="checkbox" data-change-toggle="peildatum" class="cb"/>
		</label>
		<label>
			Cre&euml;er factuur vanaf nr
			<input type="number" id="invoice-number" />
		</label>
		
		<label data-click-toggle="report_month_invoices" title="Toon / Verberg alle maandfacturen">
			Maandfacturen
			<input class="readonly" readonly="readonly" value="0"/>
		</label>
		<ul data-role="report_month_invoices" style="display:none;"></ul>
		
		<label data-click-toggle="report_quarterly_invoices" title="Toon / Verberg alle halfjaarfacturen">
			Kwartaalfacturen
			<input class="readonly" readonly="readonly" value="0"/>
		</label>
		<ul data-role="report_quarterly_invoices" style="display:none;"></ul>
		
		<label data-click-toggle="report_halfyear_invoices" title="Toon / Verberg alle halfjaarfacturen">
			Halfjaarfacturen
			<input class="readonly" readonly="readonly" value="0"/>
		</label>
		<ul data-role="report_halfyear_invoices" style="display:none;"></ul>
		
		<label data-click-toggle="report_year_invoices" title="Toon / Verberg alle halfjaarfacturen">
			Jaarfacturen
			<input class="readonly" readonly="readonly" value="0"/>
		</label>
		<ul data-role="report_year_invoices" style="display:none;"></ul>
		
		<span style="margin-bottom: 1em;" id="overview_actions">
			Acties
			<button data-click-switch="invoices" class="active">Facturen tonen</button>
		</span>
		
		<label style="display:none">
			<b style="color: red;">Let op! De volgende projecten bevatten fouten,<br/> en worden NIET gefactureerd:</b><br/>
		</label>
		<ul id="projectsWithErrors"></ul>
		
		<label style="display:none">
			<b style="color: red;">Let op! De volgende projecten hebben een group<br/>waarvan de export code óf niet, óf incompleet is<br/>ingevuld<br/></b>
		</label>
		<ul id="projectsWithoutGroup"></ul>
		
	</div>
</fieldset>
